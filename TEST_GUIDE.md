# 🧪 功能测试指南

## 🎯 测试清单

### ✅ 实时语音识别测试（<500ms）

#### 测试步骤：
```
1. 打开 http://localhost:3000
2. 点击 "开始录音"
3. 允许麦克风权限
4. 开始说话："今天天气很好"

预期结果：
- 说"今"时，立即显示灰色的"今"
- 说"今天"时，立即更新为灰色的"今天"
- 说完后，文字变成黑色（确认）
- 总延迟 <500ms ⚡
```

#### 成功标准：
- ✅ 临时结果实时显示（灰色斜体）
- ✅ 最终结果准确（黑色正常）
- ✅ 响应速度快（<500ms）
- ✅ 断句合理（停顿1秒新建段落）

---

### ✅ 声纹添加测试

#### 测试步骤：
```
1. 右侧点击 "声纹管理" 标签
2. 点击 "添加声纹" 按钮
3. 输入姓名: "测试用户A"
4. 输入邮箱: "test@example.com"（可选）
5. 上传音频文件（可选）
6. 点击 "保存" 按钮

预期结果：
- 弹窗自动关闭
- 列表显示新添加的声纹
- 显示头像 "测"
- 如果上传了音频，显示 [已录音] 标签
```

#### 成功标准：
- ✅ 保存按钮可以点击
- ✅ 点击后正常保存
- ✅ 弹窗自动关闭
- ✅ 列表正确更新

---

### ✅ 弹窗关闭测试

#### 测试步骤 1：× 按钮
```
1. 点击 "添加声纹"
2. 点击右上角 × 按钮

预期结果：
- 弹窗关闭 ✅
```

#### 测试步骤 2：外部点击
```
1. 点击 "添加声纹"
2. 点击弹窗外部的灰色区域

预期结果：
- 弹窗关闭 ✅
```

#### 成功标准：
- ✅ × 按钮可以点击
- ✅ 点击外部可以关闭
- ✅ 关闭后数据清空

---

### ✅ 声纹删除测试

#### 测试步骤：
```
1. 在声纹列表中
2. 找到任意声纹
3. 点击右侧的垃圾桶图标 🗑️
4. 确认删除

预期结果：
- 弹出确认对话框
- 确认后声纹从列表移除
- localStorage 数据更新
```

#### 成功标准：
- ✅ 删除按钮可以点击
- ✅ 确认后正常删除
- ✅ 列表正确更新

---

### ✅ 完整流程测试

#### 测试场景：录制一段会议并保存声纹

```
步骤 1: 添加声纹
1. 添加声纹 "张三"
2. 添加声纹 "李四"
3. 添加声纹 "王五"

步骤 2: 开始录音
1. 点击 "开始录音"
2. 说话："大家好，我是张三"
3. 停顿1秒
4. 说话："我是李四，很高兴见到大家"
5. 停顿1秒
6. 说话："我是王五，今天讨论项目进展"

步骤 3: 观察效果
- 每句话实时显示（<500ms）
- 停顿1秒后自动分段
- 临时结果（灰色）→ 最终结果（黑色）

步骤 4: 生成纪要
1. 点击 "停止录音"
2. 点击 "生成会议纪要"
3. 切换到 "会议纪要" 标签
4. 查看完整文本
```

#### 成功标准：
- ✅ 所有步骤流畅完成
- ✅ 无明显延迟
- ✅ 按钮全部可用
- ✅ 数据正确保存

---

## 🔍 性能测试

### 延迟测试

#### 方法：
```
1. 打开浏览器控制台（F12）
2. 切换到 Performance 标签
3. 开始录制
4. 点击 "开始录音"
5. 说话
6. 停止录制
7. 查看时间轴
```

#### 指标：
- 识别延迟: <100ms
- 渲染延迟: <50ms
- 总体感知: <500ms

### 内存测试

#### 方法：
```
1. 打开控制台（F12）
2. 切换到 Memory 标签
3. 进行10分钟连续录音
4. 查看内存占用
```

#### 指标：
- 初始内存: ~5MB
- 10分钟后: <20MB
- 无内存泄漏

---

## 🐛 问题排查

### 问题 1: 延迟超过500ms

**可能原因：**
- 网络延迟
- 浏览器版本过旧
- CPU占用过高

**解决方法：**
```
□ 检查网络连接
□ 更新 Chrome 到最新版
□ 关闭其他标签页
□ 清除浏览器缓存
```

### 问题 2: 按钮无法点击

**可能原因：**
- 缓存未更新
- JS 文件未加载

**解决方法：**
```
□ 强制刷新（Ctrl+Shift+R）
□ 清除缓存和 Cookie
□ 检查控制台错误
□ 确认加载 realtime-speech-app.js
```

### 问题 3: 声纹无法保存

**可能原因：**
- localStorage 已满
- 浏览器不支持

**解决方法：**
```
□ 清理 localStorage
□ 删除不需要的声纹
□ 使用 Chrome 浏览器
□ 检查浏览器设置
```

---

## 📊 测试报告模板

### 基础信息
```
测试日期: ____________
测试人员: ____________
浏览器: Chrome _______
系统: Windows/Mac _____
```

### 功能测试结果

| 功能 | 状态 | 备注 |
|------|------|------|
| 实时语音识别 | ☐ 通过 ☐ 失败 | |
| 临时结果显示 | ☐ 通过 ☐ 失败 | |
| 最终结果确认 | ☐ 通过 ☐ 失败 | |
| 声纹添加 | ☐ 通过 ☐ 失败 | |
| 声纹删除 | ☐ 通过 ☐ 失败 | |
| 弹窗关闭 | ☐ 通过 ☐ 失败 | |
| 数据持久化 | ☐ 通过 ☐ 失败 | |

### 性能测试结果

| 指标 | 目标 | 实际 | 状态 |
|------|------|------|------|
| 识别延迟 | <100ms | ___ms | ☐ 通过 |
| 显示延迟 | <50ms | ___ms | ☐ 通过 |
| 总体延迟 | <500ms | ___ms | ☐ 通过 |
| 内存占用 | <20MB | ___MB | ☐ 通过 |

### 问题记录
```
问题 1:
描述: _______________
重现步骤: ___________
严重程度: ___________

问题 2:
描述: _______________
重现步骤: ___________
严重程度: ___________
```

---

## ✅ 验收标准

### 必须通过的测试

1. **语音识别**
   - ✅ 能够正常开始录音
   - ✅ 实时显示转录文字
   - ✅ 延迟小于500ms
   - ✅ 能够正常停止录音

2. **声纹管理**
   - ✅ 能够添加声纹
   - ✅ 保存按钮可用
   - ✅ 关闭按钮可用
   - ✅ 删除按钮可用
   - ✅ 数据持久化

3. **用户体验**
   - ✅ 界面响应流畅
   - ✅ 无明显卡顿
   - ✅ 按钮全部可用
   - ✅ 无控制台错误

---

## 🎯 快速测试（2分钟）

### 最小测试集
```
1. 访问 http://localhost:3000
   ✅ 页面正常加载

2. 点击 "开始录音"，说 "测试"
   ✅ 实时显示文字

3. 点击 "添加声纹"
   ✅ 弹窗打开

4. 填写 "测试"，点击 "保存"
   ✅ 保存成功，弹窗关闭

5. 点击 × 或外部关闭
   ✅ 弹窗正常关闭

全部通过 = 基本功能正常 ✅
```

---

## 📝 测试检查表

### 开始测试前
```
□ 服务器已启动（http://localhost:3000）
□ 使用 Chrome 浏览器
□ 麦克风已连接
□ 准备测试音频文件
□ 打开浏览器控制台（F12）
```

### 测试过程中
```
□ 记录每个步骤的结果
□ 截图异常现象
□ 记录错误信息
□ 测量响应时间
```

### 测试完成后
```
□ 填写测试报告
□ 标记失败项
□ 提交问题反馈
□ 备份测试数据
```

---

**准备开始测试了吗？** 🚀

访问：http://localhost:3000
