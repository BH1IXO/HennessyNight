# 语音转录方案对比

## 🎯 三种方案选择

### 方案1: Whisper（推荐！免费 ⭐）

**优点：**
- ✅ **完全免费** - OpenAI开源
- ✅ **无需API密钥** - 本地运行
- ✅ **隐私保护** - 数据不出本地
- ✅ **无使用限制** - 想用多久用多久
- ✅ **准确率高** - 多语言支持好

**缺点：**
- ❌ 不支持实时转录（只能处理文件）
- ❌ 需要较好的电脑配置
- ❌ 首次下载模型需要时间

**适合场景：**
- 开发测试 ⭐
- 离线处理录制好的音频
- 预算有限的项目
- 重视隐私的场景

**安装：**
```bash
pip install openai-whisper
```

---

### 方案2: 讯飞语音（实时转录）

**优点：**
- ✅ **支持实时转录** - WebSocket流式
- ✅ **速度快** - 云端处理
- ✅ **中文优化** - 准确率高
- ✅ **免费额度** - 每天5小时，够用

**缺点：**
- ⚠️ 需要注册账号
- ⚠️ 需要配置API密钥
- ⚠️ 超出免费额度收费（2元/小时）

**免费额度：**
- 每天：5小时
- 每月：150小时
- 足够开发测试！

**适合场景：**
- **实时会议转录** ⭐
- 需要流式输出
- 生产环境

**获取方法：** 见下文详细说明

---

### 方案3: Azure Speech（备用）

**优点：**
- ✅ 企业级稳定性
- ✅ 全球服务
- ✅ 多语言支持

**缺点：**
- ⚠️ 需要Azure账号
- ⚠️ 付费服务（有免费试用）

**适合场景：**
- 已有Azure账号的企业
- 国际化产品

---

## 💰 费用对比

| 方案 | 免费额度 | 超额费用 | 适合规模 |
|------|---------|---------|----------|
| **Whisper** | ✅ 完全免费 | 无 | 个人、小项目 |
| **讯飞** | 5小时/天 | 2元/小时 | 中小项目 |
| **Azure** | 5小时试用 | 按量付费 | 企业项目 |

---

## 🔑 讯飞密钥获取（详细版）

### 如果你找不到密钥，可能是这些原因：

#### 1. 账号类型问题
- 需要**个人开发者账号**（不是企业账号）
- 需要**实名认证**

#### 2. 应用未创建
**正确流程：**
```
1. 登录 https://console.xfyun.cn/
2. 左侧菜单点击"控制台"
3. 看到"我的应用"
4. 点击"创建新应用"
5. 填写应用信息：
   - 应用名称：智能会议系统
   - 应用平台：WebAPI ⭐ 重要！
   - 点击"提交"
```

#### 3. 密钥显示位置

**创建应用后：**
```
1. 在"我的应用"列表中
2. 点击你创建的应用名称（不是操作按钮）
3. 进入应用详情页
4. 在页面顶部会看到：

   ┌─────────────────────────────────────┐
   │ 应用ID(APPID):    12345678         │
   │ API密钥(APIKey):  abc123...        │
   │ API密钥(APISecret): def456...      │
   └─────────────────────────────────────┘

   如果看不到，刷新页面或重新登录
```

#### 4. 服务开通

**重要：** 创建应用后需要开通服务！

```
1. 在应用详情页
2. 找到"服务管理"或"能力管理"标签
3. 点击"添加服务"
4. 搜索"语音听写"
5. 选择"语音听写（流式版）"
6. 点击"确认添加"
```

---

## 📸 可能的界面位置

### 位置A: 老版控制台
```
控制台 → 应用管理 → 我的应用 → 应用详情
```

### 位置B: 新版控制台
```
控制台首页 → 我的应用 → 点击应用卡片
```

### 位置C: 如果完全找不到
```
直接访问：https://console.xfyun.cn/app/myapp
```

---

## 🎯 推荐方案（按需求）

### 需求1: 快速测试（今天就要用）
**推荐：Whisper**
- 无需注册
- 5分钟安装完成
- 完全免费

**命令：**
```bash
cd python
pyannote-env\Scripts\activate
pip install openai-whisper
python -c "import whisper; print('OK')"
```

---

### 需求2: 实时会议转录（生产环境）
**推荐：讯飞语音**
- 支持实时流式
- 免费额度够用
- 中文效果好

**注册时间：** 10-15分钟
**免费额度：** 每天5小时

---

### 需求3: 离线处理 + 隐私保护
**推荐：Whisper**
- 完全本地处理
- 数据不出本地
- 无网络依赖

---

## 💡 混合方案（最佳实践）

**开发阶段：**
```
Whisper（免费） → 开发测试
```

**生产环境：**
```
讯飞实时转录（前5小时免费）
    ↓
Whisper处理（超出免费额度的部分）
```

这样可以：
- ✅ 最大化使用免费资源
- ✅ 降低成本
- ✅ 保持功能完整

---

## 🚀 立即开始

### 选择Whisper（推荐新手）

```bash
# 1. 安装
cd D:\Hennessy.uno\meeting-system-backend\python
pyannote-env\Scripts\activate
pip install openai-whisper

# 2. 测试
python -c "import whisper; print('✅ Whisper已安装')"

# 3. 配置.env
TRANSCRIPTION_PROVIDER=whisper
```

详细文档：`docs/WHISPER_SETUP.md`

---

### 选择讯飞（需要实时转录）

1. 注册：https://www.xfyun.cn/
2. 创建应用（WebAPI平台）
3. 开通"语音听写（流式版）"服务
4. 复制三个密钥
5. 配置到 `.env`

详细文档：`docs/IFLYTEK_API_GUIDE.md`

---

## ❓ 常见问题

### Q: 我现在应该选哪个？
**A:**
- 如果只是测试基本功能 → **现在不需要任何转录服务**（先测试会议管理、AI纪要）
- 如果要测试音频转录 → **Whisper**（5分钟搞定）
- 如果要实时转录 → **讯飞**（需要注册）

### Q: Whisper和讯飞哪个准确率高？
**A:** 差不多，都很好。Whisper可能在英文和多语言上更强，讯飞在中文和实时性上更好。

### Q: 讯飞真的每天5小时免费吗？
**A:** 是的！官方免费额度，足够开发测试。

### Q: 我能同时用两个方案吗？
**A:** 可以！系统支持多Provider，可以根据场景切换。

---

## 📊 决策树

```
需要语音转录？
├─ 是 → 需要实时转录？
│  ├─ 是 → 讯飞语音（注册10分钟）
│  └─ 否 → Whisper（5分钟安装）
└─ 否 → 先测试其他功能
   （会议管理、AI纪要等）
```

---

**建议：先用Whisper快速测试，需要实时功能时再注册讯飞！**
